(()=>{"use strict";var t,e;window.jQuery,window.wp=window.wp||{},inlineEditL10n={error:"Error while saving the changes.",saved:"Changes saved."},t=jQuery,e=window.wp,window.inlineEditCron={init(){const e=this,n=t("#inline-edit"),i=t("#the-list");e.type=i.attr("data-wp-lists").substring(5),e.what="#"+e.type+"-",i.on("click",".editinline",function(){t(this).attr("aria-expanded","true"),inlineEditCron.edit(this)}),n.keyup(function(t){if(27===t.which)return inlineEditCron.revert()}),t(".cancel",n).click(function(){return inlineEditCron.revert()}),t(".save",n).click(function(){return inlineEditCron.save(this)}),t("input, select",n).keydown(function(t){if(13===t.which)return inlineEditCron.save(this)}),t('#posts-filter input[type="submit"]').mousedown(function(){e.revert()}),inlineEditCron.updateDates(),t('#inline-edit input[name="offset"]').val((new Date).getTimezoneOffset()),t("body").on("click","a.leira-cron-jobs-admin-rating-link",function(){t.post(ajaxurl,{action:"leira-cron-jobs-footer-rated",_wpnonce:t(this).data("nonce")},function(){}),t(this).parent().text(t(this).data("rated"))})},updateDates(){t("#the-list abbr.date-time-field").each(function(e,n){const i=(n=t(n)).data("utc-time"),a=n.data("date-format")+" "+n.data("time-format"),r=new Date(1e3*i);n.text(inlineEditCron.dateFormat(a,r))})},dateFormat(t,e){e instanceof Date||(e=new Date(e));const n={Y:e.getFullYear(),y:e.getFullYear().toString().slice(-2),m:String(e.getMonth()+1).padStart(2,"0"),n:e.getMonth()+1,d:String(e.getDate()).padStart(2,"0"),j:e.getDate(),H:String(e.getHours()).padStart(2,"0"),h:String((e.getHours()+11)%12+1).padStart(2,"0"),g:(e.getHours()+11)%12+1,i:String(e.getMinutes()).padStart(2,"0"),s:String(e.getSeconds()).padStart(2,"0"),a:e.getHours()<12?"am":"pm",A:e.getHours()<12?"AM":"PM",D:e.toLocaleString("en-US",{weekday:"short"}),l:e.toLocaleString("en-US",{weekday:"long"}),M:e.toLocaleString("en-US",{month:"short"}),F:e.toLocaleString("en-US",{month:"long"}),c:e.toISOString(),w:e.getDay()};return t.replace(/\\?([a-zA-Z])/g,(t,e)=>void 0!==n[e]?n[e]:e)},toggle(e){const n=this;"none"===t(n.what+n.getId(e)).css("display")?n.revert():n.edit(e)},edit(e){let n,i,a=this;return a.revert(),"object"==typeof e&&(e=a.getId(e)),n=t("#inline-edit").clone(!0),i=t("#inline_"+e),t("td",n).attr("colspan",t("th:visible, td:visible",".wp-list-table.widefat:first thead").length),t(a.what+e).hide().after(n).after('<tr class="hidden"></tr>'),t("> div",i).each(function(e,i){const a=(i=t(i)).attr("class");if(i=i.text(),"time"===a){t(":input[name=time]",n).val(i);const e=new Date(1e3*i),a="00";let r=e.getHours().toString();r=a.substring(0,a.length-r.length)+r;let o=e.getMinutes().toString();o=a.substring(0,a.length-o.length)+o,t(":input[name=mm]",n).val(e.getMonth()+1),t(":input[name=jj]",n).val(e.getDate()),t(":input[name=aa]",n).val(e.getFullYear()),t(":input[name=hh]",n).val(r),t(":input[name=mn]",n).val(o),t(":input[name=ss]",n).val(e.getSeconds())}else"action"===a?t(":input[name=_action]",n).val(i):t(":input[name="+a+"]",n).val(i)}),t(n).attr("id","edit-"+e).addClass("inline-editor").show(),t(".ptitle",n).eq(0).focus(),!1},save(n){let i,a;return t('input[name="taxonomy"]').val(),"object"==typeof n&&(n=this.getId(n)),t("table.widefat .spinner").addClass("is-active"),i={action:"inline-save-cron-job"},a=t("#edit-"+n).find(":input").serialize(),i=a+"&"+t.param(i),t.post(ajaxurl,i,function(i){let a,r,o,d=t("#edit-"+n+" .inline-edit-save .notice-error"),s=d.find(".error");t("table.widefat .spinner").removeClass("is-active"),i?-1!==i.indexOf("<tr")?(t(inlineEditCron.what+n).siblings("tr.hidden").addBack().remove(),r=t(i).attr("id"),t("#edit-"+n).before(i).remove(),r?(o=r.replace(inlineEditCron.type+"-",""),a=t("#"+r)):(o=n,a=t(inlineEditCron.what+n)),t("#parent").find("option[value="+o+"]").text(a.find(".row-title").text()),a.hide().fadeIn(400,function(){a.find(".editinline").attr("aria-expanded","false").focus(),e.a11y.speak(inlineEditL10n.saved)}),inlineEditCron.updateDates()):(d.removeClass("hidden"),s.html(i),e.a11y.speak(s.text())):(d.removeClass("hidden"),s.html(inlineEditL10n.error),e.a11y.speak(inlineEditL10n.error))}),!1},revert(){let e=t("table.widefat tr.inline-editor").attr("id");e&&(t("table.widefat .spinner").removeClass("is-active"),t("#"+e).siblings("tr.hidden").addBack().remove(),e=e.substring(e.lastIndexOf("-")+1),t(this.what+e).show().find(".editinline").attr("aria-expanded","false").focus())},getId(e){const n=("TR"===e.tagName?e.id:t(e).parents("tr").attr("id")).split("-");return n[n.length-1]}},t(document).ready(function(){inlineEditCron.init()})})();